<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DedalusWeb Story</title>

    <script src="http://olado.github.io/doT/doT.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="../dedalus.js"></script>
    <script src="../dedalus-web.js"></script>
    <script src="../taleOfOreo.js"></script>
    <link rel="stylesheet" href="themes/nix/story.css">

 </head>
<body>
    <div id="story">

        <initscript>
            story.toDisable = [];
            story.hasWep = false;
            story.currChar = "Oreo";
            story.forestSpiderDanger = 0;
            story.isDeathBySpider = function(){
                return story.forestSpiderDanger > 2
            };
            story.isCurrChar = function(c) {
                return c === story.currChar;
            };
            story.getPageChar = function(pg){
                return pg + story.currChar;
            };
        </initscript>

        <beforeEveryThing>
            
        </beforeEveryThing>

        <beforeEveryPageTurn>
        </beforeEveryPageTurn>

        <beforeEveryParagraphShown>
        </beforeEveryParagraphShown>

        <afterEveryThing>
        </afterEveryThing>

        <afterEveryPageTurn>
        </afterEveryPageTurn>

        <afterEveryParagraphShown>
        </afterEveryParagraphShown>

        <!-- Novel -->
        <title>A Tale of Oreo</title>

        <!-- Objects -->
        <obj id="steelSword" inventoryName="Steel Sword">
            <action id="Examine">
                ** Looks like a standard steel sword, it's a bit damaged from the crash but is in usable condition. **
            </action>

            <action id="Get">
                <when>!story.isInInventory('steelSword')</when>
                * Placed in sheath. *
                {{ story.putInInventory('steelSword'); }}
                {{story.hasWep = true;}}
            
            </action>

        </obj>

        <!-- Pages -->
        <page id="intro">
            ** Blackness fades away into a hint of light, you see a man, sitting bound up in the cart staring straight at you. **
        </page>

        <page id="start" class="first">
            (Mystery Man) <br>
            Hey you! You're finally awake!<br>
            <br>
            You were trying to cross the border, right?<br>
            Walked right into that ambush, like that thief over there...
            <br><br><br>
            My name is Gerald of Rivia, who are you?
            <br><br>
            (Hero) <br>
            * I'm <turn to="pg1Oreo">Oreo The Warrior Priestess</turn>.<br>
            * I'm <turn to="pg1Edge">xXxPussySlayer69xXx The Edgelord</turn>.<br>
            * I'm <turn to="pg1Pitz">Pitz The Evil Rouge</turn>.<br>
        </page>
        <!-- <p>Quite unsurprisingly, there is even an <interact with="dummyObject">object</interact> lying around.</p>
        <p>Looking around with more attention, you notice <turn to="otherPage">another page</turn></p> -->

        <!-- Forest -->
        <page id="pg1Oreo">
            {{story.currChar = "Oreo";}}
            An ominous feeling takes hold.<br>
           <show paragraph="cartFly">...</show>
            
            <paragraph id="p1Oreo">
                You quickly murmur a spell to soak most of the damage from the landing.<br>
                <show paragraph="{{= story.getPageChar('p2') }}">...</turn>
            </paragraph>
            <paragraph id="p2Oreo">
                You're lucky, the spell works well and while the others around you crash horribly, you are saved from most of the damage.<br>
                <show paragraph="startp1">...</show>
            </paragraph>
            
        </page>
        <page id="pg1Edge">
            {{story.currChar = "Edge";}}
            An ominous feeling takes hold.<br>
           <show paragraph="cartFly">...</show>
            
            <paragraph id="p1Edge">
                Ffffffuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu<br>
                <show paragraph="{{= story.getPageChar('p2') }}">...</turn>
            </paragraph>
            <paragraph id="p2Edge">
                You crash horribly into a nearby tree breaking your back.<br>
                <br>
                "Fuck my life, why did you have to pick me, asshole..." are the last words that exit your mouth...<br>
                <br>
                <br>
                You die.
                {{ story.endGame(); }}
            </paragraph>
        </page>

        <page id="intoForest">
            The thick woods quickly mask the roars of the beast, and a calm quiet ensues. The woods are so thick that even the wind can't seem to breach the silence.<br>
            You walk for a few hours, with no idea where you are anymore, the dense forest blocks out the sun, and all the trees look exactly alike.<br>
            <br>
            You finally hear something other than the silent forest, it sounds like running water nearby.<br>
            You run your tongue over your dry lips and instinctively turn towards the sound.<br>
            <turn to="{{= story.getPageChar('MeetFairies') }}">...</turn>
        </page>

        
        <page id="landForest">
            You are in a thick forest, there are many items strewn around you, yet you hear the roar of the beast not too far away.<br>
            Should you <turn to="{{= story.getPageChar('lookAroundForest') }}">risk a look around</turn>, 
            <turn to="intoForest">run deeper into the woods</turn> or turn back and 
            <turn to="{{= story.getPageChar('FightWoodsBeast') }}">face the creature</turn> that attacked?
        </page>
        
        <page id="lookAroundForestOreo">
            <p>On the ground around you, you can spot a <interact with="steelSword">sword</interact>, there are also the people from the cart, maybe you should <show paragraph="forestCheckAlive1">check if they're still alive</show>.</p>
        </page>
        
        <page id="FightWoodsBeastOreo">
            You steel yourself, years of training at the temple were not for nothing, you mumble a reinforcing spell, pick up a sword from the shattered ruins of the cart and walk carefully towards the roars.<br>
            <turn to="deathByBeast">Draw sword and press on...</turn>
        </page>
        
        <page id="deathByBeast">
            You scramble to free yourself of the vines as you walk near the edge of the forest, you can see the beast's shadow between the leaves.<br>
            <br>
            As soon as you clear the forest and lay eyes on the towering beast a deafening roar hits your face and you smell the stench of death from within it's maw.<br>
            Blinded and stunned by the beast your courage wavers.
            <br>
            You try to retreat through the thicket you came from but you stumble and get trapped.<br><br>
            Within seconds the beast is upon you and the last thing you hear is a strange voice you did not know you had uttering a short whimper.
            {{story.endGame();}} 
        </page>

        <!-- Fairies -->
        <page id="MeetFairiesOreo">
            You follow the sound of water until you reach a small clearing with a creek of clear water flowing through it.<br>
            You kneel down and take a few sips of the cool liquid.<br><br>

            <show paragraph="ClearingFairies1">You hear bickering behind you...</show>
        </page>

        <page id="ClearingFairiesConvo1">
            The male fairy bristles with indignation, he moves to charge at you but the female fairy holds him back.<br>
            They start bickering again.<br><br>

            Suddenly the male fairy breaks free from the female's grasp and comes flying right at you.<br>
            <show paragraph="fightFairies1">...</show>

            <paragraph id="fightFairies1">
                True to your word, you flatten your hand and swat at the tiny fairy.<br>
                ** Duff **<br>
                He crashes to the ground with a surprising big thud for such a small creature.<br>
                <br>
                The female fairy wails and flies quickly to her mate.<br>
                <show paragraph="fightFairies2">...</show>
            </paragraph>
            <paragraph id="fightFairies2">
                I told you that would happen! When are you going to start listening to me? She admonishes him.<br><br>
                You noticed that even though she is worried her mate is hurt, she is also clearly pleased with herself for being correct.<br>
                <br>
                She turns to you and squeaks:<br>
                Please don't attack us she pleads, we are only small forest fairies.<br>
                Behind her you see her mate getting up, *little fucker got lucky* he mumbles...<br>
                <br>
                Clearly these beings are intelligent, you decide to <turn to="ClearingFairiesConvo2">see if they can help you</turn>.
            </paragraph>
        </page>

        <page id="ClearingFairiesConvo2">
            You decide to move the conversation to lighter grounds, you direct your words to the female fairy, as she doesn't seem like such a sociopath.<br>
            <br>
            ({{= story.currChar }})<br>
            Hi, my name is {{= story.currChar}}, I'm lost in this forest. I could actually use your help.<br>
            <br>
            She flies in front of you and flashes you a charming smile.<br>
            (Female Fairy)<br>
            Pleased to meet you, my name is LentilSoup and the insensitive oaf behind me is Hamburger, it's so nice to have some guests in our clearing, we don't get many visitors here! Say hi Hamburger, don't embarrass me again!<br>
            <br>
            (Hamburger)<br>
            Hello, asshole.<br>
            <br>
            LentilSoup flashes him an exasperated look...<br>
            She starts to apologize for him when her words trail away, she looks at your face intently.<br>
            <br>
            <show paragraph="fairiesStory1">...</show>
            <paragraph id="fairiesStory1">
                Wait this can't be *that* {{= story.currChar }}, right?<br>
                Hamburger flies close to you and looks at your face carefully.<br>
                <br>
                Maybe... he mutters.<br>
                * He has a troubled look on his face. *<br>
                <show paragraph="fairiesStory2">...</show>
            </paragraph>
            <paragraph id="fairiesStory2">
                (Hamburger)<br>
                We were just going out. Towards the temple, you should follow us {{= story.currChar }}.<br>
                <br>
                <br>
                He turns around grabs LentilSoup, they start moving, whispering amongst themselves in hushed voices,
                you can make out the words *destiny* and something that sounds like *salafa(?)*, but they quickly get out of hearing range.
                <br>
                Hamburger turns around suddenly, "Come on fuckface!" he yells impatiently before hurrying forward.<br>
                <br>
                You can vaguely hear LentilSoup admonishing him for his foul language.<br>
                You quickly <turn to="wayToTemple">get going</turn> as to not lose the fairies.
            </paragraph>
        </page>
        <!-- Temple -->

        <page id="wayToTemple">
            You catch up with the fairies with a bit of difficulty as they move very deftly through the forest.<br>
            ({{= story.currChar }})<br>
            Where are you taking me?<br>
            <br>
            (LentilSoup)<br>
            We're going to the Temple of Falafel, we're going to see the Wizard there.<br>
            <br>
            ({{= story.currChar }})<br>
            The Wizard of the Temple of Falafel? Who's that?<br>
            <br>
            (Hamburger)<br>
            Just a crazy old man.
            * LentilSoup slaps him on the hairy shoulder *<br>
            <br>
            Your breathing is getting a bit rough because of the hard trek. The fairies are flying very fast and even as fit as you are,
            walking in the dense forest with roots and weeds sticking out is taking quite a bit of a toll on your body.<br>
            You decide to stop talking and focus on the way ahead, at least with the fairies you're not going in circles, maybe this Falafel Wizard or whatever can help you.<br>
            <br>
            The trees start to spread out farther apart, you think you can see a light in the distant gloom, is that a fire?<br>
            <turn to="{{= story.getPageChar('wayToTempleEncounter') }}">You press on after the fairies.</turn> 
        </page>

        <page id="wayToTempleEncounterOreo">
            The forest clears up a bit and with the fire in the distance you can see a bit better, you've started lagging pretty hard behind the fairies huffing and puffing as you go.<br>
            Your forehead is sweaty and is leaking to your eyes which you wipe.<br>
            Some branch grabs your arm, you yank your arm to free it, but the branch seems to be stuck to you, holding you with incredible force.<br>
            <br>
            The unexpected resistance in momentum sends you spinning hard to the right.<br>
            Your chest hits another sticky branch and your left leg as well.<br>
            You try to move back without touching anymore of the sticky branches but you are stuck tight.<br>
            You look behind you for the fairies but cannot see them anymore in the gloom, just the distant fire.<br>

            Should you:<br>
            * <show paragraph="{{= story.getPageChar('yellForHelpForestEncounter1')}}">Yell to the fairies</show><br>
            * <turn to="{{= story.getPageChar('examineForestEncounter1')}}">Examine the branches</turn><br>
            * <show paragraph="{{= story.getPageChar('flailForestEncounter1')}}">Use a strengthening spell to try and break free</show><br>
        </page>

        <page id="examineForestEncounter1Oreo">
            You recall in your memory a spell that will let you see a bit better in the darkness of the forest. You speak the words, and squint your eyes, 
            the spell starts taking hold as the world around you seems to turn to shades of gray.<br>
            You wait a few moments for your eyes to adjust and try to asses your predicament.<br>
            <br>
            You look behind you to see if the fairies are in anyway visible now but the spell is not powerful enough to pierce through the far away darkness.<br>
            You look at the branches that are holding you.<br>
            <br>
            It is hard to determine colors with the active spell, but the branches that hold you do not seem to be the same dark hue of the tree trunk next to you.<br>
            Your eyes widen as you see that the branch that is holding your leg is connected to the floor of the forest and shoots way up into the darkness above, not emanating from any of the trees above
            but continuing in an exact straight path to the sky above.<br>
            In your surrounding you can see similar such branches(?) connecting between the sky and the ground, in all sort of odd angles.<br>
            <br>
            You start to get very concerned now, these are definitely not branches.<br>
            You pick up a twig from the ground carefully avoiding moving your body that's already stuck to the "ropes", and try to examine the rope holding your arm with the twig.<br>
            <br>
            The rope is taut and the smallest poking of it sends small vibrations up the rope to the dark sky.<br> 
            The twig instantly gets stuck just like the rest of your body and you give up trying to examine it.<br>
            <br>
            Suddenly you feel a very small vibration in the rope holding you, you hadn't moved at all, and the vibration seems to emanate from far above you. You look up but all you can see is the rope stretching above to the darkness.<br>
            <br>
            Understanding hits you like a hammer, you are stuck in some enormous creature's web.<br>
            <turn to="{{= story.getPageChar('forestEncounter1')}}">You feel another small vibration in the rope...</turn>
        </page>

        <page id="forestEncounter1Oreo">
            You think fast now, 
        </page>

        <paragraph id="flailForestEncounter1Oreo">
            You recall the incantation in your head. You whisper the words and feel your pulse quicken. Blood is flowing hard through your veins and you feel incredibly hot.<br>
            You brace yourself and start shaking your body hard, pulling with your free leg out of the sticky branches.<br>
            You struggle for a whole minute with as little results as before the spell.<br>
            You're worried if you flail too hard you will hit another of the sticky branches in the dark and become completely trapped.<br>
            <show paragraph="flailForestEncounter2Oreo">...</show>
        </paragraph>

        <paragraph id="flailForestEncounter2Oreo">
            {{story.forestSpiderDanger += 2;}}
            {{? story.isDeathBySpider() }}
            {{story.turnTo('deathByForestSpider');}}
            {{??}}
            Should you try again or do something else?
            {{?}}
        </paragraph>

        <paragraph id="yellForHelpForestEncounter1Oreo">
            You yell for Hamburger and LentilSoup loudly, your voice reverberates through the empty woods, your hear nothing but silence in return.<br>
            You're starting to get a bad feeling about this.<br>
            <show paragraph="yellForHelpForestEncounter2Oreo">...</show>
        </paragraph>

        <paragraph id="yellForHelpForestEncounter2Oreo">
            {{story.forestSpiderDanger += 1;}}
            {{? story.isDeathBySpider() }}
            {{story.turnTo('deathByForestSpider');}}
            {{??}}
            Should you try again or do something else?
            {{?}}
        </paragraph>

        <page id="deathByForestSpider">
            You're thinking hard about your next move when a rustle from above pierces the silence.<br>
            You turn your head upward just in time to see a grey-brown spider the size of a moose hanging above you, you try to scream and move, but feel your muscles betray you.<br>
            You have trouble staying conscious as your back starts hurting intensely, were you already bitten before you even noticed the monstrosity?<br>
            You faint.<br>
            <br>
            You're wrapped in something strong and can't move an inch, even if you weren't you're not sure you would be able to move anyway, you feel so weak...<br>
            <br>
            The ground is so far down from you that you can barley see it any more...<br>
            <br>
            You hear Hamburger swearing from far far below. Where the fuck did {{= story.currChar }} go?<br>
            <br>
            Only darkness and this sickening sound of something sucking<br>
            *Glup Glup*<br>
            You lose consciousness again.<br>
            {{story.endGame();}}
            
        </page>
        <!-- Global Paragraphs -->
        <paragraph id="startp1">
            You pick yourself up and think, what to do? <br>
            <turn to="landForest">...</turn>
        </paragraph>

        <paragraph id="forestCheckAlive1">
            At first glance it appears everyone is dead, however you brave forward to make sure. <br>
            ** Groan **<br>
            You quickly turn around to see Gerald of Rivia slightly moving.<br>
            Come closer he rasps to you.<br>
            <show paragraph="forestCheckAlive2">...</show>
        </paragraph>

        <paragraph id="forestCheckAlive2">
            You lean closer and turn him on his back. <br>
            ** Cough ** <br>
            You can hear his uneven breath and see the blood coming from his mouth, a tree branch is stuck mere inches from his heart halfway impaling him.<br>
            {{? story.isCurrChar('Oreo') }}
            You mumble a spell to help ease his suffering, nothing else could help him anymore...<br>
            {{?}}
            Listen to me {{= story.currChar }}, I knew who you were when first I saw you. <br>
            ** Cough Cough ** <br>
            You must find your destiny!<br>
            <show paragraph="forestDestiny">...</turn>
        </paragraph>

        <paragraph id="forestDestiny">
            The Master Terraformer, he is your destiny! <br>
            <br>
            ** Wheeze ** <br>
            You can see that Gerald does not have much strength left in him, you try and still him, but he speaks louder now. <br>
            <br>
            Remember, you must find him! The man on the surfboard, he is your destiny!!<br>
            <br>
            You stay with him in his final moment and then <turn to="landForest">get up</turn>, there's nothing left for you here.
        </paragraph>

        <paragraph id="cartFly">
            Suddenly, a rumble in the distance, you hear a mighty roar.<br>
            The ground shakes as a large shadow engulfs the cart.<br>
            <br>
            You barely have time to shield your face as the cart goes flying off of the trail and you go hurling through space.<br>

            <show paragraph="{{= story.getPageChar('p1') }}">...</turn>
        </paragraph>

        <paragraph id="ClearingFairies1">
            You quickly turn around, 
            {{? story.hasWep }}
            and reach to draw your weapon from it's sheath.
            {{??}}
            and clench your fists to prepare for a fight.
            {{?}}
            <br>

            You can see two small fairies arguing at the edge of the clearing looking worriedly at you.<br>
            You walk over to them and as you get closer you notice that one is male and the other female.<br><br> 
            The female is short (even for fairies) and has long black flowing hair, while the male is hairy with a black beard and silver stubble in his hair. <br>
            <br>
            They stop arguing as you approach and the female quickly hides behind the small hairy shoulders of the male.<br>
            <show paragraph="ClearingFairies2">...</show>
        </paragraph>

        <paragraph id="ClearingFairies2">
            The male puffs his chest and looks you down, raising his fists and a tiny voice he cries:<br>
            (Male Fairy)<br>
            Be gone from our clearing you overgrown cockhair!<br>
            <br>
            * You hesitate at the unexpected evil words coming from such a small creature. *<br>
            <br>
            You might be too retarded to understand, he continues, so I'll repeat it slower for you, Gooooooo Awaaaaayyyy Fartfaceeeeeeee!!<br>
            We fairies possess powerful magic and can instantly turn you into a river frog, which in your case would be an improvement!<br><br>

            ({{= story.currChar }})<br>
            * <turn to="ClearingFairiesConvo1">I'll not be threatened by a 10cm little monkey, attack me and I'll swat you like a mosquito!</turn><br>
            * <turn to="ClearingFairiesConvo2">I mean you no harm, I just came to get some water.</turn><br>
        </paragraph>

    </div>

    <div id="wrapper">
        <div id="title"></div>

        <div id="inventoryHostWrapper">
            <h2>Inventory</h2>
            <div id="inventoryHost"></div>
        </div>

        <div id="host"></div>
    </div>

    <div id="interactionHost"></div>

    <div id="undoStageHost"></div>

    <div id="footer">
        <a id="undoHost" href="#">Undo</a> &bull; <a id="saveHost" href="#">Save</a> &bull; <a id="restoreHost" href="#">Restore</a> &bull; <a id="resetHost" href="#">Reset</a>
    </div>

    <script>
        $(function () {
            new DedalusWeb({
                domSource         : $('#story'),
                domTarget         : $('#host'),
                titleTarget       : $('#title'),
                inventoryTarget   : $('#inventoryHost'),
                interactionTarget : $('#interactionHost'),
                undoTarget        : $('#undoHost'),
                undoStageTarget   : $('#undoStageHost'),
                saveTarget        : $('#saveHost'),
                restoreTarget     : $('#restoreHost'),
                resetTarget       : $('#resetHost'),
            });
        });

    </script>
</body>
</html>